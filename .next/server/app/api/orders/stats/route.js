"use strict";(()=>{var e={};e.id=513,e.ids=[513],e.modules={517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},3685:e=>{e.exports=require("http")},5687:e=>{e.exports=require("https")},5477:e=>{e.exports=require("punycode")},2781:e=>{e.exports=require("stream")},7310:e=>{e.exports=require("url")},9796:e=>{e.exports=require("zlib")},6595:(e,r,t)=>{t.r(r),t.d(r,{headerHooks:()=>m,originalPathname:()=>g,requestAsyncStorage:()=>i,routeModule:()=>u,serverHooks:()=>p,staticGenerationAsyncStorage:()=>l,staticGenerationBailout:()=>_});var o={};t.r(o),t.d(o,{GET:()=>GET,runtime:()=>c}),t(8976);var s=t(884),a=t(6132),n=t(5798),d=t(5327);let c="nodejs";async function GET(e){try{let e=new Date;e.setHours(0,0,0,0);let r=e.toISOString(),t=new Date(e.getTime()+864e5).toISOString(),{count:o,error:s}=await d.RU.from("orders").select("*",{count:"exact",head:!0});s&&console.error("Error fetching total orders:",s);let{count:a,error:c}=await d.RU.from("orders").select("*",{count:"exact",head:!0}).eq("status","pending");c&&console.error("Error fetching pending orders:",c);let{count:u,error:i}=await d.RU.from("orders").select("*",{count:"exact",head:!0}).gte("created_at",r).lt("created_at",t);i&&console.error("Error fetching today's orders:",i);let{data:l,error:p}=await d.RU.from("orders").select("total").gte("created_at",r).lt("created_at",t).eq("status","completed");p&&console.error("Error fetching today's revenue:",p);let m=l?.reduce((e,r)=>e+Number(r.total),0)||0,{count:_,error:g}=await d.RU.from("orders").select("*",{count:"exact",head:!0}).eq("status","completed");g&&console.error("Error fetching completed orders:",g);let{count:h,error:x}=await d.RU.from("orders").select("*",{count:"exact",head:!0}).eq("status","cancelled");return x&&console.error("Error fetching cancelled orders:",x),n.Z.json({stats:{total_orders:o||0,pending_orders:a||0,today_orders:u||0,today_revenue:m,completed_orders:_||0,cancelled_orders:h||0}},{status:200})}catch(e){return console.error("Unexpected error in GET /api/orders/stats:",e),n.Z.json({error:"Internal server error"},{status:500})}}let u=new s.AppRouteRouteModule({definition:{kind:a.x.APP_ROUTE,page:"/api/orders/stats/route",pathname:"/api/orders/stats",filename:"route",bundlePath:"app/api/orders/stats/route"},resolvedPagePath:"/Users/codemedavid/Documents/starrs/Starr-s-Famous-Shakes/app/api/orders/stats/route.ts",nextConfigOutput:"",userland:o}),{requestAsyncStorage:i,staticGenerationAsyncStorage:l,serverHooks:p,headerHooks:m,staticGenerationBailout:_}=u,g="/api/orders/stats/route"}};var r=require("../../../../webpack-runtime.js");r.C(e);var __webpack_exec__=e=>r(r.s=e),t=r.X(0,[955,771,97],()=>__webpack_exec__(6595));module.exports=t})();